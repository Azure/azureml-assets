$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
code: ../components/preprocessing/

display_name: "multiply pets"
experiment_name: "data_multiplication"
description: >-
    Trains an image segmentation model using tensorflow.

tags:
    version: 1.0.0

########################
### INPUTS / OUTPUTS ###
########################

inputs:
    # data inputs
    input_folder:
        type: uri_folder
        mode: download # pick ro_mount, rw_mount or download
        path: azureml://datastores/dlbenchmarkdatablobstandard/paths/azureml-vision-datasets/pets_segmentation
    multiply: 500
    increment: 0

outputs:
    output_folder: # Path to export checkpoints
        type: uri_folder
        mode: upload # pick ro_mount, rw_mount or download
        path: azureml://datastores/dlbenchmarkdatablobstandard/paths/azureml-vision-datasets/artificial/pets_segmentation/x500/increment0


###############
### COMMAND ###
###############

command: >-
    python multiply_folder_dataset.py 
    --input ${{inputs.input_folder}}
    --output ${{outputs.output_folder}}
    --multiply ${{inputs.multiply}}
    --increment ${{inputs.increment}}


###################
### ENVIRONMENT ###
###################

environment: azureml:AzureML-sklearn-1.0-ubuntu20.04-py38-cpu@latest


###############
### COMPUTE ###
###############

compute: azureml:cpu-cluster-lg

# </jobs>
