$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

description: Trains an object detection model.

name: train_object_detection_model
display_name: Train Object Detection Model
version: 1

inputs:
  training_data:
    description: Training data
    type: mltable
  validation_data:
    description: Validation data
    type: mltable
    optional: true
  model_name:
    description: Model name
    type: string
    default: yolov5
    enum: ['yolov5', 'fasterrcnn_resnet18_fpn', 'fasterrcnn_resnet34_fpn', 'fasterrcnn_resnet50_fpn', 'fasterrcnn_resnet101_fpn', 'fasterrcnn_resnet152_fpn', 'retinanet_resnet50_fpn']
  learning_rate:
    description: Initial learning rate
    type: number
    optional: true
    min: 0
    max: 1
  number_of_epochs:
    description: Number of training epochs
    type: integer
    optional: true
    min: 1
  optimizer:
    description: Type of optimizer
    type: string
    default: 'sgd'
    enum: ['sgd', 'adam', 'adamw']  

code: ./src

environment: azureml:AzureML-AutoML-DNN-Vision-GPU:89

command: >-
  python run.py
  --training_data ${{inputs.training_data}}
  [--validation_data ${{inputs.validation_data}}]
  --model_name  ${{inputs.model_name}}
  [--learning_rate  ${{inputs.learning_rate}}]
  [--number_of_epochs ${{inputs.number_of_epochs}}]
  --optimizer ${{inputs.optimizer}}

distribution:
  type: pytorch
